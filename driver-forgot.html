<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>فراموشی رمز راننده | ناجی راه</title>
  <link rel="shortcut icon" href="logo7.png">
<link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazir-font@v30.1.0/dist/font-face.css" rel="stylesheet" type="text/css" />
<style>
body {font-family: 'Vazir', sans-serif; margin:0; padding:0; background:#ff7a00;}
.auth-wrap {display:flex; justify-content:center; align-items:center; min-height:100vh;}
.auth-card {background:rgba(255,255,255,0.95); padding:40px 30px; border-radius:15px; box-shadow:0 8px 20px rgba(0,0,0,0.15); max-width:450px; width:90%;}
.auth-title {text-align:center; color:#ff7a00; margin-bottom:10px; font-size:28px;}
.auth-sub {text-align:center; color:#555; margin-bottom:20px;}
.form-row {margin-bottom:20px; display:flex; flex-direction:column;}
.form-row label {margin-bottom:5px; font-weight:bold; color:#333;}
.form-row input {padding:10px 15px; border:1px solid #ccc; border-radius:8px; font-size:15px; transition:0.3s;}
.form-row input:focus {border-color:#ff7a00; outline:none; box-shadow:0 0 5px rgba(255,122,0,0.5);}
.actions {display:flex; justify-content:space-between; align-items:center; flex-wrap:wrap; gap:10px; margin-bottom:15px;}
.btn {padding:12px 20px; border:none; border-radius:8px; cursor:pointer; font-weight:bold; font-size:15px; transition:0.3s;}
.btn-primary {background:#ff7a00; color:#fff;}
.btn-primary:hover {background:#e66c00;}
.btn-secondary {background:#ccc; color:#333; text-decoration:none; display:inline-block; text-align:center;}
.btn-secondary:hover {background:#bbb;}
.auth-footer {text-align:center; font-size:14px; color:#555; margin-top:10px;}
.auth-footer a {color:#ff7a00; text-decoration:none; font-weight:bold;}
.auth-footer a:hover {text-decoration:underline;}
@media (max-width:500px){.actions {flex-direction:column;}} 
</style>
</head>
<body>
<div class="auth-wrap">
<div class="auth-card">
<h1 class="auth-title">فراموشی رمز راننده</h1>
<p class="auth-sub">لطفاً شماره تماس یا کد ملی خود را وارد کنید</p>
<form id="forgotForm" action="/api/forgot-password" method="POST">
  <div class="form-row">
    <label for="nationalId">کد ملی</label>
    <input type="text" id="nationalId" name="nationalId" placeholder="کد ملی راننده" required>
  </div>
  <div class="form-row">
    <label for="phone">شماره تماس</label>
    <input type="tel" id="phone" name="phone" placeholder="مثال: 0912xxxxxxx" required>
  </div>
  <div class="actions">
    <button type="submit" class="btn btn-primary">بازیابی رمز عبور</button>
    <a href="driver-login.html" class="btn btn-secondary">بازگشت به ورود</a>
  </div>
</form>
<p class="auth-footer">اگر رمز خود را به خاطر دارید، برای ورود <a href="driver-login.html">اینجا کلیک کنید</a>.</p>
</div>
</div>
<script>
document.getElementById('forgotForm').addEventListener('submit', function(e){
  e.preventDefault();
  // ارسال فرم به بک‌اند با AJAX یا فرم استاندارد
  const data = {
    nationalId: document.getElementById('nationalId').value,
    phone: document.getElementById('phone').value
  };
  fetch('/api/forgot-password', {
    method: 'POST',
    headers: {'Content-Type': 'application/json'},
    body: JSON.stringify(data)
  })
  .then(res => res.json())
  .then(response => alert(response.message))
  .catch(err => alert('خطا در ارسال اطلاعات'));
});
// ارسال رمز مجدد
document.getElementById('forgotForm').addEventListener('submit', function(e){
  e.preventDefault();

  const data = {
    nationalId: document.getElementById('nationalId').value,
    phone: document.getElementById('phone').value
  };

  fetch('https://naji-backend.onrender.com/api/driver/forgot-password', {

    method: 'POST',
    headers: {'Content-Type': 'application/json'},
    body: JSON.stringify(data)
  })
  .then(res => res.json())
  .then(response => {
    alert(response.message);
    window.location.href = "driver-login.html"; // هدایت به صفحه ورود
  })
  .catch(err => alert('خطا در ارسال اطلاعات'));
});

</script>
</body>

</html>
